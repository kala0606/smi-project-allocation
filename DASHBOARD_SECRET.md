# Dashboard Secret Link Setup

## Overview

The dashboard can be accessed via a secret link parameter. This allows you to host the form on GitHub Pages while keeping the dashboard private.

## Secret Link

### Access the Dashboard

To access the dashboard, add the secret parameter to your form URL:

```
https://yourusername.github.io/repo-name/project-form/smi-project-allocation/?dashboard=smi2026alloc
```

**Current Secret Key:** `smi2026alloc`

### Change the Secret Key

To change the secret key, edit `index.html` and find this line:

```javascript
const DASHBOARD_SECRET = 'smi2026alloc';
```

Change `'smi2026alloc'` to your preferred secret value.

## GitHub Pages Setup

### Step 1: Upload Files

Make sure these files are in your GitHub repository:
- `project-form/smi-project-allocation/index.html` (form)
- `project-form/smi-project-allocation/dashboard.html` (dashboard)
- `project-form/smi-project-allocation/allocation_data.json` (generated by Python script)
- `project-form/smi-project-allocation/allocation_stats.json` (generated by Python script)

### Step 2: Enable GitHub Pages

1. Go to your repository on GitHub
2. Click **Settings** → **Pages**
3. Under **Source**, select your branch (usually `main` or `master`)
4. Select the folder containing your files (usually `/ (root)`)
5. Click **Save**

### Step 3: Access Your Site

Your form will be available at:
```
https://yourusername.github.io/repo-name/project-form/smi-project-allocation/
```

Your dashboard will be available at:
```
https://yourusername.github.io/repo-name/project-form/smi-project-allocation/?dashboard=smi2026alloc
```

## Updating Dashboard Data

After running the allocation script (`allocation.py`), copy the generated JSON files to the project-form directory:

```bash
# From the Allocation root directory
cp allocation_data.json project-form/smi-project-allocation/
cp allocation_stats.json project-form/smi-project-allocation/
```

Then commit and push to GitHub:

```bash
git add project-form/smi-project-allocation/allocation_data.json
git add project-form/smi-project-allocation/allocation_stats.json
git commit -m "Update allocation data"
git push
```

## File Structure for GitHub Pages

```
your-repo/
└── project-form/
    └── smi-project-allocation/
        ├── index.html              # Form (public)
        ├── dashboard.html           # Dashboard (secret link)
        ├── allocation_data.json     # Student data
        ├── allocation_stats.json    # Statistics
        ├── google-apps-script.js   # Google Sheets script
        └── README.md               # Form documentation
```

## Security Notes

- The secret link is a simple URL parameter check - it's not highly secure
- Anyone who knows the secret link can access the dashboard
- For better security, consider:
  - Using GitHub Pages with authentication
  - Hosting the dashboard on a private server
  - Using environment variables or server-side authentication

## Troubleshooting

### Dashboard shows "Error loading data"

Make sure:
1. `allocation_data.json` and `allocation_stats.json` are in the same directory as `dashboard.html`
2. The JSON files are valid (check with a JSON validator)
3. GitHub Pages has deployed the latest version (may take a few minutes)

### Secret link doesn't work

1. Check that the secret parameter matches exactly: `?dashboard=smi2026alloc`
2. Verify the secret key in `index.html` matches what you're using in the URL
3. Clear your browser cache and try again
